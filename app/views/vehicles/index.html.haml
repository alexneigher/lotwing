/ Page Content
= render partial: 'shared/maxbox_dependencies'
= javascript_include_tag('vehicle_manager')
.container-fluid
  .row
    .col-lg-5
      = render partial: 'tags/new'
      .table-responsive
        %table.table.table-bordered.table-striped.table-sm
          %thead
            %tr
              %th VIN
              %th Year
              %th Make
              %th Model
              %th Age
              %th.text-center 
                %i.fa.fa-pencil
          %tbody.small
            - @vehicles.each do |vehicle|
              %tr
                %td= vehicle.vin
                  
                %td
                  = vehicle.year
                %td
                  = link_to vehicle_path(vehicle), remote: true do
                    = vehicle.make
                %th
                  = link_to vehicle_path(vehicle), remote: true do
                    = vehicle.model
                %th
                  = time_ago_in_words(vehicle.created_at)
                %td.text-center
                  = link_to edit_vehicle_path(vehicle) do
                    %i.fa.fa-pencil

        = link_to "Add New Vehicle", new_vehicle_path, class: 'btn btn-small btn-primary'
      %ul.list-group
        - @vehicles.each do |vehicle|
          %li.list-group-item.vehicle-list{id: dom_id(vehicle)}
            .row
              .col
                %i.fa.fa-car{class: (vehicle.is_used? ? "text-green" : "text-blue").to_s}
                = vehicle.vin
              .col
                - if vehicle.current_parking_tag.present?
                  Parked
                  = time_ago_in_words( vehicle.current_parking_tag.created_at) + " ago"

                - else
                  Not Parked
              .col-1
                - if vehicle.current_parking_tag.present?
                  = link_to tag_deactivate_path(vehicle.current_parking_tag) do
                    %i.fa.fa-refresh
    .col-md-7
      #vehicleDetailContainer
      #map{ :style => "width: 100%; height: 550px" }
      
      .d-none
        //place all dom-dependent info here
        %input#dealership_map_bearing{value: current_user.dealership.map_bearing }
        %input#dealership_map_zoom{value: current_user.dealership.map_zoom }              

        =# paginate @vehicles     